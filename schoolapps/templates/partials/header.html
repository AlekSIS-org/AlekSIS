{% load static %}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SchoolApps – Katharineum zu Lübeck</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="{%  static 'common/favicon.ico' %}" />

    <!--------->
    <!-- CSS -->
    <!--------->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen"
          href="{% static 'materialize/dist/css/materialize.min.css' %}">

    <!-- django-material -->
    {% include 'material/includes/material_css.html' %}

    <link rel="stylesheet" type="text/css" media="screen" href="{% static 'common/style.css' %}">
    <!---------------->
    <!-- JavaScript -->
    <!---------------->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="{% static 'materialize/dist/js/materialize.min.js' %}"></script>
    <script>
        $(document).ready(function () {
            // Initialize sidenav [MAT]
            $(".sidenav").sidenav();

            // Initialize datepicker [MAT]
            $('.datepicker').datepicker({
                format: 'dd.mm.yyyy',
                // Translate to German
                i18n: {
                    months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
                    monthsShort: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
                    weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
                    weekdaysShort: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
                    weekdaysAbbrev: ['S', 'M', 'D', 'M', 'D', 'F', 'S'],

                    // Buttons
                    today: 'Heute',
                    clear: 'Löschen',
                    done: 'OK',
                },

                // Set monday as first day of week
                firstDay: 1,
                //autoClose: true
            });

            // Initialize timepicker [MAT]
            $('.timepicker').timepicker({
                twelveHour: false,
                //autoClose: true,
                cancelText: 'Abbrechen',
                clearText: 'Löschen',
                doneText: 'OK'
            });

            //Initialize tooltip [MAT]
            $('.tooltipped').tooltip();
        });
    </script>
    <script>
        //set AUB-Form
        function set_time(lesson_field) {
            // fill timefield based on lesson value
            if (lesson_field.id == 'id_from_lesson') {
                $('[id=id_from_time]').val(lesson_field.value);
            }
            else {
                // calculate lessons end time
                // string methods easier than date function muddle
                var h = lesson_field.value.split(':')[0];
                var m = lesson_field.value.split(':')[1];
                if (m < 15) {
                    m = parseInt(m) + 45;
                }
                else {
                    m = parseInt(m) - 15;
                    h = parseInt(h) + 1;
                }
                m = m.toString()
                h = h.toString()
                if (m.length == 1) {
                    m = '0'+m
                }
                var newTime = h+':'+m;
                $('[id=id_to_time]').val(newTime);
            }
        }
    </script>
    <!-- django-material -->
    {% include 'material/includes/material_js.html' %}


</head>
<body>
<header>
    <!-- Menu button (sidenav) -->
    <div class="container">
        <a href="#" data-target="slide-out" class="top-nav sidenav-trigger hide-on-large-only">
            <i class="material-icons">menu</i>
        </a>
    </div>

    <!-- Nav bar (logged in as, logout) -->
    <nav class="primary-color">
        <a class="brand-logo" href="#">SchoolApps</a>

        <div class="nav-wrapper">
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                {% if user.is_authenticated %}
                    <li>Angemeldet als {{ user.get_username }}</li>
                    <li><a href="{% url 'logout' %}">Abmelden <i class="material-icons right">exit_to_app</i></a></li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <!-- Main nav (sidenav) -->
    <ul id="slide-out" class="sidenav sidenav-fixed">
        <li class="logo">
            <a id="logo-container" href="/" class="brand-logo">
                <img src="{% static 'common/logo.png' %}">
            </a>
        </li>

        {% if user.is_authenticated %}
            <li>
                <a href="{% url 'dashboard' %}">
                    <i class="material-icons">home</i> Dashboard
                </a>
            </li>
            <li>
                <div class="divider"></div>
            </li>
            <li><a class="subheader grey lighten-3">Lehrerfunktionen</a></li>
            {% if perms.aub.apply_for_aub %}
                <li><a href="{% url 'aub_index' %}"><i class="material-icons">business_center</i> Unterrichtsbefreiungen</a>
                </li>
            {% endif %}
            {% if perms.aub.check1_aub %}
                <li><a href="{% url 'aub_check1' %}"><i class="material-icons">check</i> Anträge genehmigen 1</a></li>
            {% endif %}
            {% if perms.aub.check2_aub %}
                <li><a href="{% url 'aub_check2' %}"><i class="material-icons">check_box</i> Anträge genehmigen 2</a>
                </li>
            {% endif %}
            <li>
                <div class="divider"></div>
            </li>
            <li>
                <a class="subheader grey lighten-3">Stundenplan</a>
            </li>
            <li>
                <a href="{% url 'timetable_admin_all' %}">
                    <i class="material-icons">grid_on</i> Übersicht
                </a>
            </li>
            <li>
                <a href="{% url 'timetable_quicklaunch' %}">
                    <i class="material-icons">directions</i> Schnellzugriff
                </a>
            </li>
            <li>
                <a href="{% url 'timetable_substitutions' %}">
                    <i class="material-icons">person</i> Vertretungsplan
                </a>
            </li>
            <li>
                <div class="divider"></div>
            </li>
            <li>
                <a href="{% url 'logout' %}">
                    <i class="material-icons">exit_to_app</i> Abmelden
                </a>
            </li>
        {% endif %}
    </ul>
</header>
