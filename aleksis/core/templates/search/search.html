{# -*- engine:django -*- #}

{% extends "core/base.html" %}

{% load i18n material_form %}

{% block browser_title %}{% blocktrans %}Search{% endblocktrans %}{% endblock %}
{% block page_title %}{% blocktrans %}Global Search{% endblocktrans %}{% endblock %}

{% block content %}
  <form method="get">
    {% form form=form %}{% endform %}
    <button type="submit" class="btn waves-effect waves-light green">
      {% blocktrans %}Search{% endblocktrans %}
    </button>
  </form>

   {% if query %}
     <h3>Results</h3>

     {% for result in page.object_list %}
       <p>
         <i class="material-icons">{{ result.object.icon_ }}</i>
         <a href="{{ result.object.get_absolute_url|default:"#" }}">
           {{ result.object }}
         </a>
       </p>
     {% empty %}
       {# FIXME Add a note if no results were found #}
     {% endfor %}

     {% if page.has_other_pages %}
       <ul class="pagination">
         {% if page.has_previous %}
           <li class="waves-effect">
             <a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">
               <i class="material-icons">chevron_left</i>
             </a>
           </li>
         {% else %}
           <li class="disabled"><a href="#"><i class="material-icons">chevron_left</i></a></li>
         {% endif %}

         {% for page_num in page.paginator.page_range %}
           {% if page.number == page_num %}
             <li class="active"><a href="#">{{ page_num }}</a></li>
           {% else %}
             <li class="waves-effect"><a href="?q={{ query }}&amp;page={{ page_num }}">{{ page_num }}</a></li>
           {% endif %}
         {% endfor %}

         {% if page.has_next %}
           <li class="waves-effect">
             <a href="?q={{ query }}&amp;page={{ page.next_page_number }}">
               <i class="material-icons">chevron_right</i>
             </a>
           </li>
         {% else %}
           <li class="disabled"><a href="#"><i class="material-icons">chevron_right</i></a></li>
         {% endif %}
       </ul>
     {% endif %}
   {% else %}
     {# FIXME Add a note to show before making a query #}
   {% endif %}
{% endblock %}
